<html>

<title>Weather Service App (P2 - Assignment 3)</title>

<body text = "#000000"
      link="#000fff"
      vlink="#ff0f0f"
      bgcolor="#ffffff">

<hr>
<h3>Weather Service App (P2 - Assignment 3)</h3>

<hr width=50% align=left>
<h4>Overview of the Weather Service App</h4>

<p> The purpose of this "mini-project" assignment is to give you
experience using Android to develop a Weather Service app, which you
can create entire "from scratch" if you desire.  This app should use
two Android Bound Services--one implementing a synchronous AIDL-based
two-way mechanism (e.g., WeatherServiceSync) and one implementing an
asynchronous AIDL-based two-way mechanism (e.g.,
WeatherServiceAsync)--to obtain weather information from
OpenWeatherMap (to access their web service you need to sign up for a
free API key <A HREF="http://openweathermap.org/appid">here</A>). </P>

<P>Both Bound Services require Android Interface Definition Language
(<A
HREF="http://developer.android.com/guide/components/aidl.html">AIDL</A>)
interfaces to specify the methods they support.  These methods are
passed a location obtained as a String (such as "Nashville,TN") and
return a WeatherData object that can be used to display various
current weather-related information for that location. </P>

<P> You have a great degree of flexibility in how you design and
implement this app, as long as it meets the following requirements
</P>

    <UL> 

    <LI> <p> The app should support both synchronous and asynchronous
    AIDL-based two-way mechanisms for interacting with the
    WeatherServiceSync and WeatherServiceAsync, which are covered in
    the Week 3 videos on "The Android Interface Definition Language
    and Binder Framework".  To avoid blocking the UI Thread in the
    WeatherActivity, the synchronous two-way mechanism should use an
    AsyncTask, which is covered <A
    HREF="https://www.youtube.com/watch?v=tQJnejqcAZw&list=PLZ9NgFYEMxp4tbiFYip6tDNIEBRUDyPQK&index=32">here</a>
    and <A
    HREF="https://www.youtube.com/watch?v=2-o92SLinqk&list=PLZ9NgFYEMxp4tbiFYip6tDNIEBRUDyPQK&index=33">here</a>. </P>

    <LI> <P> The app must handle runtime configuration changes
    properly.  My solution uses the <A
    HREf="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter">Model-View-Presenter</A>
    (MVP) pattern to help alleviate various accidental complexities
    associated with developing concurrent Android apps.  However,
    you're free to handle runtime configuration changes as you see
    fit.  More information on how to handle these types of changes is
    available <A
    HREF="http://developer.android.com/guide/topics/resources/runtime-changes.html">here</a>
    and <A
    HREF="http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html">here</a>.

    <LI> <P> The interfaces and parcelable WeatherData object used to
    communicate with the WeatherServiceSync and WeatherServiceAsync
    should at least support the functionality defined by the AIDL
    files provided in the skeletons (e.g., the
    <code>getCurrentWeather()</code> methods), though you're welcome
    to add further capabilities or edit these files as you see fit.
    The weather-related fields in WeatherData can be displayed in
    whatever format you desire. </P>

    <LI> <P> Since weather data doesn't change instantaneously, the
    WeatherServiceSync and WeatherServiceAsync should implement some
    form of <A
    HREF="http://kircher-schwanninger.de/michael/publications/Caching.pdf">caching
    pattern</A>, whereby weather data is retrieved from the
    WeatherService web service only every 10 seconds, regardless of
    the number of times <code>getCurrentWeather()</code> is called.
    Any calls during the intervening time period should be serviced
    from the cache.  Although the cache should be thread-safe, you're
    free to make its data persistent (or not), as well as to share the
    cache (or not) between the two Bound Service implementations. </P>

    <LI> <P> To obtain weather-related information, the Bound Services
    will need to parse the Json data returned from making an HTTP GET
    request via the <A HREF="http://openweathermap.org/api">Open
    Weather Map API</a>.  An example of the Json data returned by API
    can be seen by opening <A
    HREF="http://api.openweathermap.org/data/2.5/weather?q=Nashville,TN">this
    link</a> in your browser.  In addition to the videos on HTTP
    programming from week 3 and 4, helpful information about creating
    Plain Ol' Java Objects (POJOs) from Json schemes is available <A
    HREF="http://www.jsonschema2pojo.org">here</a>. There's also
    overview of a JsonReader parser <A
    HREF="https://developer.android.com/reference/android/util/JsonReader.html">here</a>.</P>

    <LI> <P> Please do not use any third-party libraries (e.g.,
    Retrofit, Jackson, etc.) in this assignment.  The first assignment
    in the next MOOC will involve writing a variant of this assignment
    using Retrofit, Content Providers, and SQLite. </P>

    </UL>

    <P>The material necessary to complete assignment 3 is available in
    videos from Weeks 3 and 4 of the MOOC. </P>

<hr width=50% align=left>
<h4>Skeleton Code</h4>

  <p> Skeleton code for this assignment is available <a
    href="https://github.com/douglascraigschmidt/POSA-15/tree/master/assignments/assignment3">here</a>.
    The View and Presenter layers are complete, but there are many
    TODO's in the Model layer to implement the Bound Services.
    However, you don't need to use <EM>any</EM> of the supplied code
    if you'd like to write the app from scratch.  A high-level
    walk-through of assignment 3 is available in the <A
    href="https://class.coursera.org/posacommunication-003/lecture/343">here</a>,
    though you are under <EM>no</EM> obligation to model your solution
    on my approach. </p>

    <P>Note that there are no automated unit tests for this
    assignment.  Instead, you'll know the program is working when you
    can successfully view the weather at the designated locations.
    Make sure that your program works properly for both valid and
    invalid locations entered by the user. </p>

<hr width=50% align=left>
<h4>Concluding Remarks</h4>
<p>

This assignment is designed to deepen your understanding with
programming Android Bound Services using the AIDL and Binder framework
in Java.  It will also give you experience parsing Json data retrieved
from a web service.  It's highly recommended to watch the videos
listed above and look at the various Bound Service examples <A
HREF="https://github.com/douglascraigschmidt/POSA-15/tree/master/ex">here</A>
to gain a better understanding of how to structure your solution.
Start early and come to Virtual Office Hours if you have questions or
run into problems.  </p>

</body>
</html>

